(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c551adac"],{"1c2e":function(t,e,n){"use strict";var i=n("1944"),r=n("857c"),o=n("efe2"),s=n("99ad"),a="toString",c=RegExp.prototype,u=c[a],l=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=a;(l||d)&&i(RegExp.prototype,a,(function(){var t=r(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?s.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"22ef":function(t,e,n){"use strict";var i=n("efe2");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"38eb":function(t,e,n){"use strict";var i=n("f62c").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},5139:function(t,e,n){"use strict";var i=n("99ad"),r=n("22ef"),o=RegExp.prototype.exec,s=String.prototype.replace,a=o,c=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=r.UNSUPPORTED_Y||r.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],d=c||l||u;d&&(a=function(t){var e,n,r,a,d=this,h=u&&d.sticky,f=i.call(d),g=d.source,m=0,p=t;return h&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),p=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(g="(?: "+g+")",p=" "+p,m++),n=new RegExp("^(?:"+g+")",f)),l&&(n=new RegExp("^"+g+"$(?!\\s)",f)),c&&(e=d.lastIndex),r=o.call(h?n:d,p),h?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:c&&r&&(d.lastIndex=d.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}),t.exports=a},5653:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Topbar"),n("div",{staticClass:"markdown"},[n("div",{staticClass:"container"},[n("br"),n("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",icon:"el-icon-time",circle:""},on:{click:t.getHistory}}),n("el-drawer",{attrs:{visible:t.drawer,"with-header":!1},on:{"update:visible":function(e){t.drawer=e}}},[n("span",{staticStyle:{float:"left","font-size":"25px",padding:"20px"}},[t._v("修改历史")]),n("br"),n("br"),n("el-divider"),t._l(t.historyList,(function(e){return n("el-card",{key:e.id,staticClass:"box-card",staticStyle:{width:"100%","margin-top":"10px",height:"130px"}},[n("p",{staticStyle:{float:"left","margin-top":"0px",padding:"2px"}},[t._v(t._s(e.time)+"2020-1-1")]),n("br"),n("br"),t._v(" 修改内容 "+t._s(e.msg)+" ")])}))],2),n("el-input",{staticStyle:{width:"20%","margin-left":"90px"},attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("br"),n("br"),n("mavon-editor",{ref:"md",staticStyle:{width:"1500px",height:"800px",margin:"0 auto"},on:{imgAdd:t.$imgAdd,change:t.change},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("br"),n("el-button",{staticStyle:{"margin-left":"0px"},attrs:{type:"success",icon:"el-icon-check",round:""},on:{click:t.submit}},[t._v("提交")]),n("el-dropdown",{on:{command:t.changePermission}},[n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",disabled:!(5==t.userPermission||null==this.$route.query.docID)}},[t._v(" 当前权限："+t._s(t.otherPermission)),n("i",{staticClass:"el-icon-arrow-up el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"0"}},[t._v("私密")]),n("el-dropdown-item",{attrs:{command:"1"}},[t._v("公开")]),n("el-dropdown-item",{attrs:{command:"2"}},[t._v("公开且可评论")]),n("el-dropdown-item",{attrs:{command:"3"}},[t._v("公开且可评论转发")])],1)],1)],1)])],1)},r=[],o=(n("84c2"),n("e35a"),n("1c2e"),n("5e9f"),n("6f2f")),s=(n("b2ab"),n("ddc0")),a={name:"Markdown",props:[],components:{mavonEditor:o["mavonEditor"],Topbar:s["a"]},data:function(){return{content:"",title:"",html:"",configs:{},result:{},otherPermission:"私密",permissionLevel:0,userPermission:4,docID:"",drawer:!1,historyList:[]}},methods:{$imgAdd:function(t,e){var n=this,i=new FormData;i.append("file",e),this.$http.post(this.requestUrl+"/imgAdd",i).then((function(e){n.$refs.md.$img2Url(t,e.data.url)}))},change:function(t,e){this.html=e},submit:function(){var t=this;if(null==this.html)this.$message({message:"内容不能为空哦",type:"warning"});else{this.result.docID=this.$route.query.docID,this.result.userID=sessionStorage.getItem("userId"),this.result.authorID=sessionStorage.getItem("userId"),this.result.content=this.content,this.result.html=this.html,this.result.otherPermission=this.permissionLevel,this.result.title=this.title,this.result.groupId=this.$route.query.groupId,this.result.isTemplate=this.$route.query.isTemplate,alert(this.permissionLevel);var e=new RegExp("<.+?>","g");this.result.summary=this.result.html.replace(e,"").substring(0,30),this.$http.post(this.requestUrl+"/newDoc",this.result).then((function(e){t.$message({message:e.data.msg,type:"success"}),t.$router.push("/homepage")}))}},changePermission:function(t){this.permissionLevel=t,0==this.permissionLevel&&(this.otherPermission="私密"),1==this.permissionLevel&&(this.otherPermission="公开"),2==this.permissionLevel&&(this.otherPermission="可评论"),3==this.permissionLevel&&(this.otherPermission="可评论分享")},getHistory:function(){var t=this;this.drawer=!0,this.$http.get(this.requestUrl+"/modifyRecord",{params:{documentationId:this.docID}}).then((function(e){t.historyList=e.data}))}},mounted:function(){this.content=this.$route.query.content,this.html=this.$route.query.html,this.changePermission(this.$route.query.currentPermission),this.userPermission=this.$route.query.permission,this.title=this.$route.query.title}},c=a,u=n("9ca4"),l=Object(u["a"])(c,i,r,!1,null,"79bd7657",null);e["default"]=l.exports},"59da":function(t,e,n){var i=n("2118"),r=n("5139");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"5e9f":function(t,e,n){"use strict";var i=n("b2a2"),r=n("857c"),o=n("3553"),s=n("d88d"),a=n("3da3"),c=n("2732"),u=n("38eb"),l=n("59da"),d=Math.max,h=Math.min,f=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var v=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=i.REPLACE_KEEPS_$0,b=v?"$":"$0";return[function(n,i){var r=c(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!v&&y||"string"===typeof i&&-1===i.indexOf(b)){var o=n(e,t,this,i);if(o.done)return o.value}var c=r(t),f=String(this),g="function"===typeof i;g||(i=String(i));var m=c.global;if(m){var x=c.unicode;c.lastIndex=0}var w=[];while(1){var I=l(c,f);if(null===I)break;if(w.push(I),!m)break;var S=String(I[0]);""===S&&(c.lastIndex=u(f,s(c.lastIndex),x))}for(var $="",E=0,k=0;k<w.length;k++){I=w[k];for(var R=String(I[0]),P=d(h(a(I.index),f.length),0),T=[],U=1;U<I.length;U++)T.push(p(I[U]));var L=I.groups;if(g){var D=[R].concat(T,P,f);void 0!==L&&D.push(L);var N=String(i.apply(void 0,D))}else N=_(R,f,P,T,L,i);P>=E&&($+=f.slice(E,P)+N,E=P+R.length)}return $+f.slice(E)}];function _(t,n,i,r,s,a){var c=i+t.length,u=r.length,l=m;return void 0!==s&&(s=o(s),l=g),e.call(a,l,(function(e,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":a=s[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>u){var d=f(l/10);return 0===d?e:d<=u?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):e}a=r[l-1]}return void 0===a?"":a}))}}))},7063:function(t,e,n){var i=n("a719"),r=n("50fb");t.exports=function(t,e,n){var o,s;return r&&"function"==typeof(o=e.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(t,s),t}},"84c2":function(t,e,n){var i=n("1e2c"),r=n("d890"),o=n("e8d6"),s=n("7063"),a=n("d910").f,c=n("b338").f,u=n("8a1c"),l=n("99ad"),d=n("22ef"),h=n("1944"),f=n("efe2"),g=n("b702").set,m=n("403f"),p=n("90fb"),v=p("match"),y=r.RegExp,b=y.prototype,_=/a/g,x=/a/g,w=new y(_)!==_,I=d.UNSUPPORTED_Y,S=i&&o("RegExp",!w||I||f((function(){return x[v]=!1,y(_)!=_||y(x)==x||"/a/i"!=y(_,"i")})));if(S){var $=function(t,e){var n,i=this instanceof $,r=u(t),o=void 0===e;if(!i&&r&&t.constructor===$&&o)return t;w?r&&!o&&(t=t.source):t instanceof $&&(o&&(e=l.call(t)),t=t.source),I&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var a=s(w?new y(t,e):y(t,e),i?this:b,$);return I&&n&&g(a,{sticky:n}),a},E=function(t){t in $||a($,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},k=c(y),R=0;while(k.length>R)E(k[R++]);b.constructor=$,$.prototype=b,h(r,"RegExp",$)}m("RegExp")},"8a1c":function(t,e,n){var i=n("a719"),r=n("2118"),o=n("90fb"),s=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},"99ad":function(t,e,n){"use strict";var i=n("857c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b2a2:function(t,e,n){"use strict";n("e35a");var i=n("1944"),r=n("efe2"),o=n("90fb"),s=n("5139"),a=n("0fc1"),c=o("species"),u=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),d=o("replace"),h=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var g=o(t),m=!r((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),p=m&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!m||!p||"replace"===t&&(!u||!l||h)||"split"===t&&!f){var v=/./[g],y=n(g,""[t],(function(t,e,n,i,r){return e.exec===s?m&&!r?{done:!0,value:v.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),b=y[0],_=y[1];i(String.prototype,t,b),i(RegExp.prototype,g,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}d&&a(RegExp.prototype[g],"sham",!0)}},cf44:function(t,e,n){"use strict";var i=n("e1da"),r=n.n(i);r.a},ddc0:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":t.$route.path,mode:"horizontal"},on:{select:t.handleSelect}},[n("el-menu-item",{staticStyle:{"font-weight":"bold"}},[t._v("金刚石文档")]),n("el-menu-item",{attrs:{index:"/homepage"}},[t._v("我的工作台")]),n("el-menu-item",{attrs:{index:"/groupspace"}},[t._v("团队空间")]),n("el-menu-item",{attrs:{index:"/Template"}},[t._v("模板")]),n("el-submenu",{staticStyle:{float:"right"},attrs:{index:"4"}},[n("template",{slot:"title"},[t._v(t._s(t.username))]),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:function(e){return t.GotoPersonalInfo(t.id)}}},[t._v("个人信息")]),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:t.logout}},[t._v("退出登录")]),n("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],on:{click:t.GotoLogin}},[t._v("登录/注册")])],2),n("el-menu-item",{staticStyle:{float:"right"}},[n("el-dropdown",{staticClass:"project-container"},[n("el-button",{staticStyle:{"background-color":"white","border-color":"white","padding-right":"0"},attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-bell"}),0!==t.numberOfUnreadMessages?n("el-badge",{staticClass:"item",staticStyle:{top:"-10px"},attrs:{value:t.numberOfUnreadMessages}}):t._e()],1),n("el-dropdown-menu",{staticClass:"project-dropdown",staticStyle:{"overflow-y":"auto",height:"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.notificationList,(function(e){return n("el-dropdown-item",{key:e.id},[e.status?t._e():n("i",{staticClass:"el-icon-message-solid"}),1===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),2===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),3===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.confirmDocInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),4===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),5===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),6===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),7===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),11===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),12===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),21===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.confirmGroupInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),22===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),23===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),24===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),31===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),32===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),41===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),42===e.category?n("el-button",{staticStyle:{border:"white"},on:{click:function(n){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e()],1)})),1)],1)],1),n("el-menu-item",{staticStyle:{float:"right","margin-right":"50px"}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1)],1)],1)},r=[],o={data:function(){return{id:sessionStorage.getItem("userId"),navList:[],username:"游客",passwd:"",email:"",phone_num:"",create_time:"",isshow:!0,status:"退出登录",text:"",type:sessionStorage.getItem("type"),pageList:[],groupList:[],notificationList:[],drawer:!1,direction:"rtl",count:0,visible:!1,numberOfUnreadMessages:0}},methods:{handleSelect:function(t,e){console.log(t,e)},CreateTeam:function(){},logout:function(){this.username="游客",this.status="登录",this.isshow=!1,this.$router.push({path:"/"}),location.reload(),sessionStorage.clear()},GotoLogin:function(){this.$router.push({path:"/login"})},getNotification:function(){var t=this;this.$http.get(this.requestUrl+"/getNotification",{params:{userId:sessionStorage.getItem("userId")}}).then((function(e){console.log(e.data),t.notificationList=e.data;for(var n=0;n<t.notificationList.length;n++){if(t.notificationList[n].status)break;t.numberOfUnreadMessages++}}))},goToNotification:function(t){this.viewmk(t.objectID),this.read(t)},GotoGroupDoc:function(t){sessionStorage.setItem("groupid",t),this.$router.push({path:"/groupdoc"})},search:function(){sessionStorage.setItem("text",this.text),"/searchres"==this.$route.path?location.reload():this.$router.push({path:"/searchres"})},confirmGroupInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmGroupInvitation(t,!0)?(e.$message({type:"success",message:"加入团队成功!"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入团队失败！请重试")})).catch((function(){e.confirmGroupInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入团队！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入团队失败！请重试")}))},confirmGroupInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmGroupInvitation",{params:{userId:sessionStorage.getItem("userId"),groupId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},confirmDocInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmDocInvitation(t,!0)?(e.$message({type:"success",message:"加入协作文档成功！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入协作文档失败！请重试")})).catch((function(){e.confirmDocInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入协作文档！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入协作文档失败！请重试")}))},confirmDocInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmDocInvitation",{params:{userId:sessionStorage.getItem("userId"),docId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},read:function(t){var e=this;this.$http.get(this.requestUrl+"/readNotifications",{params:{userId:sessionStorage.getItem("userId"),notificationID:t.id}}).then((function(n){e.$message({message:"已读："+t.msg,type:"success"}),console.log(n.data),t.status=!0,e.numberOfUnreadMessages--}))},findNotificationById:function(t){for(var e=0;e<this.notificationList.length;e++)if(this.notificationList[e].id==t)return this.notificationList[e];return-1}},created:function(){null!=sessionStorage.getItem("username")?(this.isshow=!1,this.username=sessionStorage.getItem("username")):this.isshow=!0,this.getNotification()}},s=o,a=(n("cf44"),n("9ca4")),c=Object(a["a"])(s,i,r,!1,null,"d6243b64",null);e["a"]=c.exports},e1da:function(t,e,n){},e35a:function(t,e,n){"use strict";var i=n("1c8b"),r=n("5139");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},f62c:function(t,e,n){var i=n("3da3"),r=n("2732"),o=function(t){return function(e,n){var o,s,a=String(r(e)),c=i(n),u=a.length;return c<0||c>=u?t?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}}}]);
//# sourceMappingURL=chunk-c551adac.898980ec.js.map