(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08d07697"],{1466:function(t,e,o){},cf44:function(t,e,o){"use strict";var i=o("e1da"),s=o.n(i);s.a},ddc0:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":t.$route.path,mode:"horizontal"},on:{select:t.handleSelect}},[o("el-menu-item",{staticStyle:{"font-weight":"bold"}},[t._v("金刚石文档")]),o("el-menu-item",{attrs:{index:"/homepage"}},[t._v("我的工作台")]),o("el-menu-item",{attrs:{index:"/groupspace"}},[t._v("团队空间")]),o("el-menu-item",{attrs:{index:"/Template"}},[t._v("模板")]),o("el-submenu",{staticStyle:{float:"right"},attrs:{index:"4"}},[o("template",{slot:"title"},[t._v(t._s(t.username))]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:function(e){return t.GotoPersonalInfo(t.id)}}},[t._v("个人信息")]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:t.logout}},[t._v("退出登录")]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],on:{click:t.GotoLogin}},[t._v("登录/注册")])],2),o("el-menu-item",{staticStyle:{float:"right"}},[o("el-dropdown",{staticClass:"project-container"},[o("el-button",{staticStyle:{"background-color":"white","border-color":"white","padding-right":"0"},attrs:{type:"primary"}},[o("i",{staticClass:"el-icon-bell"}),0!==t.numberOfUnreadMessages?o("el-badge",{staticClass:"item",staticStyle:{top:"-10px"},attrs:{value:t.numberOfUnreadMessages}}):t._e()],1),o("el-dropdown-menu",{staticClass:"project-dropdown",staticStyle:{"overflow-y":"auto",height:"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.notificationList,(function(e){return o("el-dropdown-item",{key:e.id},[e.status?t._e():o("i",{staticClass:"el-icon-message-solid"}),1===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),2===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),3===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.confirmDocInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),4===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),5===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),6===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),7===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),11===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),12===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),21===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.confirmGroupInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),22===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),23===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),24===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),31===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),32===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),41===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),42===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e()],1)})),1)],1)],1),o("el-menu-item",{staticStyle:{float:"right","margin-right":"50px"}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1)],1)],1)},s=[],n={data:function(){return{id:sessionStorage.getItem("userId"),navList:[],username:"游客",passwd:"",email:"",phone_num:"",create_time:"",isshow:!0,status:"退出登录",text:"",type:sessionStorage.getItem("type"),pageList:[],groupList:[],notificationList:[],drawer:!1,direction:"rtl",count:0,visible:!1,numberOfUnreadMessages:0}},methods:{handleSelect:function(t,e){console.log(t,e)},CreateTeam:function(){},logout:function(){this.username="游客",this.status="登录",this.isshow=!1,this.$router.push({path:"/"}),location.reload(),sessionStorage.clear()},GotoLogin:function(){this.$router.push({path:"/login"})},getNotification:function(){var t=this;this.$http.get(this.requestUrl+"/getNotification",{params:{userId:sessionStorage.getItem("userId")}}).then((function(e){console.log(e.data),t.notificationList=e.data;for(var o=0;o<t.notificationList.length;o++){if(t.notificationList[o].status)break;t.numberOfUnreadMessages++}}))},goToNotification:function(t){this.viewmk(t.objectID),this.read(t)},GotoGroupDoc:function(t){sessionStorage.setItem("groupid",t),this.$router.push({path:"/groupdoc"})},search:function(){sessionStorage.setItem("text",this.text),"/searchres"==this.$route.path?location.reload():this.$router.push({path:"/searchres"})},confirmGroupInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmGroupInvitation(t,!0)?(e.$message({type:"success",message:"加入团队成功!"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入团队失败！请重试")})).catch((function(){e.confirmGroupInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入团队！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入团队失败！请重试")}))},confirmGroupInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmGroupInvitation",{params:{userId:sessionStorage.getItem("userId"),groupId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},confirmDocInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmDocInvitation(t,!0)?(e.$message({type:"success",message:"加入协作文档成功！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入协作文档失败！请重试")})).catch((function(){e.confirmDocInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入协作文档！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入协作文档失败！请重试")}))},confirmDocInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmDocInvitation",{params:{userId:sessionStorage.getItem("userId"),docId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},read:function(t){var e=this;this.$http.get(this.requestUrl+"/readNotifications",{params:{userId:sessionStorage.getItem("userId"),notificationID:t.id}}).then((function(o){e.$message({message:"已读："+t.msg,type:"success"}),console.log(o.data),t.status=!0,e.numberOfUnreadMessages--}))},findNotificationById:function(t){for(var e=0;e<this.notificationList.length;e++)if(this.notificationList[e].id==t)return this.notificationList[e];return-1}},created:function(){null!=sessionStorage.getItem("username")?(this.isshow=!1,this.username=sessionStorage.getItem("username")):this.isshow=!0,this.getNotification()}},r=n,a=(o("cf44"),o("9ca4")),c=Object(a["a"])(r,i,s,!1,null,"d6243b64",null);e["a"]=c.exports},e1da:function(t,e,o){},ed31:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-aside",{attrs:{width:"15%"}},[o("el-row",{staticClass:"tac"},[o("el-col",[o("br"),o("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(e){return t.creategroup(e)}}},[t._v("创建团队")]),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"-1"},on:{open:t.handleOpen,close:t.handleClose}},t._l(t.res.groupList,(function(e){return o("el-menu-item",{key:e.id},[o("el-menu-item",{attrs:{index:e.id}},[o("i",{staticClass:"el-icon-s-custom"}),o("span",{attrs:{slot:"title"},on:{click:function(o){return t.GotoGroupDoc(e.id)}},slot:"title"},[t._v(t._s(e.name))]),o("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"hover"}},[o("i",{staticClass:"el-icon-more"}),o("el-dropdown-menu",{staticStyle:{float:"right"},attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{nativeOn:{click:function(o){return t.createDoc(e.id)}}},[t._v("创建文档")]),o("el-dropdown-item",{nativeOn:{click:function(o){t.reserveId(e.id),t.dialogFormVisible=!0}}},[t._v("添加成员")]),o("el-dropdown-item",{nativeOn:{click:function(o){return t.catMember(e.id)}}},[t._v("查看成员")]),o("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.isCreator,expression:"Group.isCreator"}],staticStyle:{color:"red"},nativeOn:{click:function(o){return t.delGroup(e.id)}}},[t._v("删除团队")]),o("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!e.isCreator,expression:"!Group.isCreator"}],staticStyle:{color:"red"},nativeOn:{click:function(o){return t.dropGroup(e.id)}}},[t._v("退出团队")])],1)],1)],1)],1)})),1)],1)],1),o("el-dialog",{staticStyle:{"overflow-x":"hidden"},attrs:{title:"团队成员",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.res.memberList}},[o("el-table-column",{attrs:{label:"用户名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticStyle:{"margin-left":"10px",cursor:"pointer"},on:{click:function(o){return t.GotoPersonalInfo(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),o("el-table-column",{attrs:{label:"权限",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[t._v(t._s(t.permission[e.row.permission-1]))])],1)]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-dropdown",{staticStyle:{"margin-right":"5px"}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:5!=e.row.permission,expression:"scope.row.permission!=5"}],attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("改变权限")]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{nativeOn:{click:function(o){return t.writerPermission(e.row.id,1)}}},[t._v("查看")]),o("el-dropdown-item",{nativeOn:{click:function(o){return t.writerPermission(e.row.id,2)}}},[t._v("评论")]),o("el-dropdown-item",{nativeOn:{click:function(o){return t.writerPermission(e.row.id,3)}}},[t._v("分享")]),o("el-dropdown-item",{nativeOn:{click:function(o){return t.writerPermission(e.row.id,4)}}},[t._v("修改")]),o("el-dropdown-item",{nativeOn:{click:function(o){return t.writerPermission(e.row.id,5)}}},[t._v("管理")])],1)],1),o("el-button",{directives:[{name:"show",rawName:"v-show",value:5!=e.row.permission,expression:"scope.row.permission!=5"}],attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.delMember(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),o("el-dialog",{attrs:{title:"添加团队成员",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-select",{attrs:{placeholder:"输入用户名","reserve-keyword":"",filterable:"",remote:"","remote-method":t.remoteMethod},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.searchList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addMember(t.groupId,t.value),t.dialogFormVisible=!1}}},[t._v("添 加")])],1)],1)],1)},s=[],n={data:function(){return{res:{groupList:[],memberList:[]},permission:["查看","评论","分享","修改","管理"],drawer:!1,direction:"rtl",value:"",searchList:[],dialogVisible:!1,dialogFormVisible:!1,groupId:0}},methods:{GotoGroupDoc:function(t){this.$router.push({path:"/groupdoc",query:{id:t}})},GotoGroupSpace:function(){this.$router.push({path:"/groupspace"})},createDoc:function(t){this.$router.push({path:"/markdown",query:{isTemplate:!1,groupId:t}})},delGroup:function(t){this.$http.get(this.requestUrl+"/delGroup",{params:{userID:sessionStorage.getItem("userId"),groupID:t}}).then((function(t){console.log(t.data),t.data.success?(alert("删除成功"),location.reload()):alert(t.data.msg)}))},dropGroup:function(t){this.$http.get(this.requestUrl+"/delGroup",{params:{groupID:t,userID:sessionStorage.getItem("userId")}}).then((function(t){console.log(t.data),t.data.success?(alert("退出成功"),location.reload()):alert("退出失败")}))},catMember:function(t){sessionStorage.setItem("groupId",t),this.getMember(t,this.res),this.dialogVisible=!0},delMember:function(t){this.$http.get(this.requestUrl+"/kickMember",{params:{userId1:sessionStorage.getItem("userId"),userId2:t,groupId:sessionStorage.getItem("groupId")}}).then((function(t){t.data.success?(alert("成功踢出"),location.reload()):alert("权限不足")}))},remoteMethod:function(t){var e=this;""!==t?this.$http.get(this.requestUrl+"/searchUser",{params:{text:t}}).then((function(t){console.log(t.data),e.searchList=t.data})):this.searchList=[]},reserveId:function(t){this.groupId=t}},created:function(){sessionStorage.setItem("type",4),this.getGroup(this.res)}},r=n,a=o("9ca4"),c=Object(a["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-08d07697.e6deb766.js.map