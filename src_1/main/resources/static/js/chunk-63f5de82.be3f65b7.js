(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63f5de82"],{"0496":function(t,e,o){var i=o("efe2");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},"0a21":function(t,e,o){"use strict";var i=o("7c95"),n=o.n(i);n.a},"31a0":function(t,e,o){"use strict";var i=o("1c8b"),n=o("5197"),s=o("0496");i({target:"String",proto:!0,forced:s("link")},{link:function(t){return n(this,"a","href",t)}})},"4ad0":function(t,e,o){"use strict";var i=o("ff07"),n=o.n(i);n.a},5197:function(t,e,o){var i=o("2732"),n=/"/g;t.exports=function(t,e,o,s){var r=String(i(t)),a="<"+e;return""!==o&&(a+=" "+o+'="'+String(s).replace(n,"&quot;")+'"'),a+">"+r+"</"+e+">"}},"716f":function(t,e,o){"use strict";var i=o("cb13"),n=o.n(i);n.a},"7c95":function(t,e,o){},"7ee5":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-aside",{attrs:{width:"15%"}},[o("el-row",{staticClass:"tac"},[o("el-col",[o("br"),o("br"),o("el-button",{staticStyle:{"margin-left":"5%",width:"60%"},attrs:{type:"success",icon:"el-icon-edit"},nativeOn:{click:function(e){return t.GotoMarkDown(e)}}},[t._v("新建文档")]),o("br"),o("br"),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":t.$route.path},on:{open:t.handleOpen,close:t.handleClose}},[o("el-menu-item",{attrs:{index:"/homepage"}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("最近使用")])]),o("el-menu-item",{attrs:{index:"/Mycreate"}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的文档")])]),o("el-menu-item",{attrs:{index:"/mycollection"}},[o("i",{staticClass:"el-icon-menu"}),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的收藏")])]),o("el-menu-item",{attrs:{index:"/RecycleBin"}},[o("i",{staticClass:"el-icon-document"}),o("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 回 收 站 ")])])],1)],1)],1)],1)},n=[],s={methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},r=s,a=(o("0a21"),o("9ca4")),c=Object(a["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},ba0c:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",{staticStyle:{height:"100%"}},[o("el-header",[o("Topbar")],1),o("el-container",[o("Asidebar"),o("el-container",[o("el-main",[o("div",[o("mavon-editor",{staticStyle:{"z-index":"1",border:"1px solid #d9d9d9",height:"auto"},attrs:{toolbars:t.markdownOption,editable:!1,toolbarsFlag:!1,defaultOpen:"preview",subfield:!1},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.isTemplate?o("div",{staticStyle:{float:"right"}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-s-promotion",round:""},on:{click:function(e){return t.addTem(t.docId)}}},[t._v("添加模板")]),o("el-popover",{attrs:{title:"复制以下连接来进行分享",width:"200",trigger:"click",content:t.link}},[o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-link",type:"warning",round:""},on:{click:t.shareDoc},slot:"reference"},[t._v("分享")])],1)],1):t._e(),t.isTemplate?t._e():o("div",{staticStyle:{float:"right"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",round:""},on:{click:function(e){return t.editmk(t.docId)}}},[t._v("编辑")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isCollect,expression:"!isCollect"}],attrs:{type:"danger",icon:"el-icon-star-off",round:""},on:{click:function(e){return t.collection()}}},[t._v("收藏")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isCollect,expression:"isCollect"}],attrs:{type:"danger",icon:"el-icon-star-on",round:""},on:{click:function(e){return t.collection()}}},[t._v("已收藏")]),o("el-popover",{attrs:{title:"复制以下连接来进行分享",width:"200",trigger:"click",content:t.link}},[o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",icon:"el-icon-link",type:"warning",round:""},on:{click:function(e){return t.shareDoc()}},slot:"reference"},[t._v("分享")])],1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",icon:"el-icon-s-custom",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("邀请协作者")])],1),o("div",{attrs:{id:"doc"}},[this.permission>=2?o("div",[o("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"快来评论吧"},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{id:"commentButton",icon:"el-icon-position",type:"success",round:"",loading:!1},on:{click:function(e){return t.sendComment()}}},[t._v("发射！")])],1):o("div",[o("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"该文档不支持评论哦"},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{id:"commentButton",icon:"el-icon-position",type:"success",round:"",loading:!1,disabled:!0},on:{click:function(e){return t.sendComment()}}},[t._v("发射！")])],1)]),o("el-divider",{}),t._l(t.replyList,(function(e){return o("el-card",{key:e.replyId,staticClass:"box-card",staticStyle:{width:"100%","margin-top":"10px"}},[o("div",{staticClass:"clearfix",staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[o("span",{staticStyle:{position:"relative",top:"-70px",float:"left","font-size":"20px","font-weight":"bold",height:"10px"},on:{click:function(o){return t.getOtherInfo(e.id)}}},[t._v(t._s(e.username))]),5==t.permission?o("el-button",{staticClass:"textbutton",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(o){return t.delReply(e.id)}}},[t._v("删除")]):t._e()],1),o("div",{staticStyle:{height:"auto","font-size":"25px"}},[t._v(" "+t._s(e.content)+" ")]),o("el-tag",{staticStyle:{position:"relative",float:"right","font-size":"15px","margin-bottom":"20px","margin-right":"2px"}},[t._v("评论于"+t._s(e.date))])],1)}))],2),o("el-footer")],1)],1)],1),o("el-dialog",{attrs:{title:"添加协作者",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-select",{attrs:{placeholder:"输入用户名",filterable:"",remote:"","remote-method":t.remoteMethod},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},t._l(t.searchList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name}})})),1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.addWriter(t.docId,t.name),t.dialogFormVisible=!1}}},[t._v("添 加")])],1)],1)],1)},n=[],s=(o("31a0"),o("ddc0")),r=o("7ee5"),a={name:"ShowDoc",components:{Topbar:s["a"],Asidebar:r["a"]},data:function(){return{value:"",docId:"",comment:{userId:"",docId:"",replyId:"",isReply:"",content:""},replyList:[],isCollect:"",isTemplate:"",permission:"",link:"",dialogFormVisible:!1,name:""}},methods:{sendComment:function(){var t=this;this.comment.userId=sessionStorage.getItem("userId"),this.comment.docId=this.docId,this.comment.replyId=0,this.comment.isReply=!1,this.$http.post(this.requestUrl+"/reply",this.comment).then((function(e){e.data.success?t.findAllReply():t.$message.error("res.data.msg")}))},findAllReply:function(){var t=this;this.$http.get(this.requestUrl+"/findAllReply",{params:{docId:this.docId}}).then((function(e){e.data.success?t.replyList=e.data.replyList:alert(e.data.msg)}))},delReply:function(t){var e=this;this.$http.get(this.requestUrl+"/deleteReply",{params:{replyId:t}}).then((function(t){console.log(t),e.$message(t.data.msg),e.findAllReply()}))},collection:function(){var t=this;this.$http.get(this.requestUrl+"/collection",{params:{docId:this.docId,userId:sessionStorage.getItem("userId")}}).then((function(e){e.data.success?(alert(111),t.isCollect=!t.isCollect):t.$message.error("收藏失败！请重试")}))},shareDoc:function(){this.permission<3?this.$message.error("权限不足，无法分享哦"):this.link=this.baseUrl+"showDoc?docId="+this.docId}},created:function(){var t=this;null==this.$route.query.content&&null!=this.$route.query.docId?this.$http.get(this.requestUrl+"/viewDoc",{params:{userId:sessionStorage.getItem("userId"),docId:this.$route.query.docId}}).then((function(e){e.data.success?(e.data.isCollect?t.isCollect=!0:t.isCollect=!1,e.data.isTemplate?t.isTemplate=!0:t.isTemplate=!1,t.value=e.data.content,t.docId=t.$route.query.docId,t.permission=e.data.userPermission,t.findAllReply()):t.$message.error(e.data.msg)})):(this.$route.query.isCollect?this.isCollect=!0:this.isCollect=!1,this.$route.query.isTemplate?this.isTemplate=!0:this.isTemplate=!1,this.value=this.$route.query.content,this.docId=this.$route.query.docId,this.permission=this.$route.query.permission,this.findAllReply(),this.$forceUpdate())}},c=a,l=(o("4ad0"),o("9ca4")),u=Object(l["a"])(c,i,n,!1,null,"13ef38c1",null);e["default"]=u.exports},cb13:function(t,e,o){},ddc0:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":t.$route.path,mode:"horizontal"},on:{select:t.handleSelect}},[o("el-menu-item",{staticStyle:{"font-weight":"bold"}},[t._v("金刚石文档")]),o("el-menu-item",{attrs:{index:"/homepage"}},[t._v("我的工作台")]),o("el-menu-item",{attrs:{index:"/groupspace"}},[t._v("团队空间")]),o("el-menu-item",{attrs:{index:"/Template"}},[t._v("模板")]),o("el-submenu",{staticStyle:{float:"right"},attrs:{index:"4"}},[o("template",{slot:"title"},[t._v(t._s(t.username))]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:function(e){return t.GotoPersonalInfo(t.id)}}},[t._v("个人信息")]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],on:{click:t.logout}},[t._v("退出登录")]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],on:{click:t.GotoLogin}},[t._v("登录/注册")])],2),o("el-menu-item",{staticStyle:{float:"right"}},[o("el-dropdown",{staticClass:"project-container"},[o("el-button",{staticStyle:{"background-color":"white","border-color":"white","padding-right":"0"},attrs:{type:"primary"}},[o("i",{staticClass:"el-icon-bell"}),0!==t.numberOfUnreadMessages?o("el-badge",{staticClass:"item",staticStyle:{top:"-10px"},attrs:{value:t.numberOfUnreadMessages}}):t._e()],1),o("el-dropdown-menu",{staticClass:"project-dropdown",staticStyle:{"overflow-y":"auto",height:"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.notificationList,(function(e){return o("el-dropdown-item",{key:e.id},[e.status?t._e():o("i",{staticClass:"el-icon-message-solid"}),1===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),2===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),3===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.confirmDocInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),4===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),5===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),6===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),7===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),11===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),12===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),21===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.confirmGroupInvitationPopout(e)}}},[t._v(t._s(e.msg))]):t._e(),22===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),23===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),24===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),31===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e(),32===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),41===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.read(e)}}},[t._v(t._s(e.msg))]):t._e(),42===e.category?o("el-button",{staticStyle:{border:"white"},on:{click:function(o){return t.goToNotification(e)}}},[t._v(t._s(e.msg))]):t._e()],1)})),1)],1)],1),o("el-menu-item",{staticStyle:{float:"right","margin-right":"50px"}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),o("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)],1)],1)},n=[],s={data:function(){return{id:sessionStorage.getItem("userId"),navList:[],username:"游客",passwd:"",email:"",phone_num:"",create_time:"",isshow:!0,status:"退出登录",text:"",type:sessionStorage.getItem("type"),pageList:[],groupList:[],notificationList:[],drawer:!1,direction:"rtl",count:0,visible:!1,numberOfUnreadMessages:0}},methods:{handleSelect:function(t,e){console.log(t,e)},CreateTeam:function(){},logout:function(){this.username="游客",this.status="登录",this.isshow=!1,this.$router.push({path:"/"}),location.reload(),sessionStorage.clear()},GotoLogin:function(){this.$router.push({path:"/login"})},getNotification:function(){var t=this;this.$http.get(this.requestUrl+"/getNotification",{params:{userId:sessionStorage.getItem("userId")}}).then((function(e){console.log(e.data),t.notificationList=e.data;for(var o=0;o<t.notificationList.length;o++){if(t.notificationList[o].status)break;t.numberOfUnreadMessages++}}))},goToNotification:function(t){this.viewmk(t.objectID),this.read(t)},GotoGroupDoc:function(t){sessionStorage.setItem("groupid",t),this.$router.push({path:"/groupdoc"})},search:function(){sessionStorage.setItem("text",this.text),this.$router.push({path:"/searchres"})},confirmGroupInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmGroupInvitation(t,!0)?(e.$message({type:"success",message:"加入团队成功!"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入团队失败！请重试")})).catch((function(){e.confirmGroupInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入团队！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入团队失败！请重试")}))},confirmGroupInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmGroupInvitation",{params:{userId:sessionStorage.getItem("userId"),groupId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},confirmDocInvitationPopout:function(t){var e=this;t.status?this.$message({message:"已读："+t.msg,type:"success"}):this.$confirm(t.msg,"邀请",{confirmButtonText:"同意",cancelButtonText:"拒绝",type:"info"}).then((function(){e.confirmDocInvitation(t,!0)?(e.$message({type:"success",message:"加入协作文档成功！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("加入协作文档失败！请重试")})).catch((function(){e.confirmDocInvitation(t,!1)?(e.$message({type:"warning",message:"已拒绝加入协作文档！"}),t.status=!0,e.numberOfUnreadMessages--):e.$message.error("拒绝加入协作文档失败！请重试")}))},confirmDocInvitation:function(t,e){return this.$http.get(this.requestUrl+"/confirmDocInvitation",{params:{userId:sessionStorage.getItem("userId"),groupId:t.objectID,userResponse:e,noticeId:t.id}}).then((function(t){return console.log(t.data),!0})),!0},read:function(t){var e=this;this.$http.get(this.requestUrl+"/readNotifications",{params:{userId:sessionStorage.getItem("userId"),notificationID:t.id}}).then((function(o){e.$message({message:"已读："+t.msg,type:"success"}),console.log(o.data),t.status=!0,e.numberOfUnreadMessages--}))},findNotificationById:function(t){for(var e=0;e<this.notificationList.length;e++)if(this.notificationList[e].id==t)return this.notificationList[e];return-1}},created:function(){null!=sessionStorage.getItem("username")?(this.isshow=!1,this.username=sessionStorage.getItem("username")):this.isshow=!0,this.getNotification()}},r=s,a=(o("716f"),o("9ca4")),c=Object(a["a"])(r,i,n,!1,null,"17fc1bc6",null);e["a"]=c.exports},ff07:function(t,e,o){}}]);
//# sourceMappingURL=chunk-63f5de82.be3f65b7.js.map